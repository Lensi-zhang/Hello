<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™šå®‰é—®å€™</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
        }
        .container {
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: fadeIn 1s ease-out;
        }
        h1 {
            color: #333;
            font-size: 3rem;
            margin: 0;
            transition: all 0.5s ease;
        }
        p {
            color: #666;
            font-size: 1.2rem;
            margin-top: 15px;
            transition: all 0.5s ease;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeInUp 0.8s ease-out 0.3s forwards;
        }
        /* ç»Ÿä¸€çš„å…¥åœºåŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(15px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        /* å†…å®¹æ¨¡å—çš„å»¶è¿ŸåŠ¨ç”» */
        .content-module {
            opacity: 0;
            transform: translateY(15px);
            transition: all 0.6s ease;
        }
        /* æ—¶é—´æ¨¡å—æ ·å¼ */
        .time-container {
            margin-top: 20px;
            opacity: 0;
            transform: translateY(15px);
            animation: fadeInUp 0.8s ease-out 0.5s forwards;
        }
        .time-display {
            font-size: 1.5rem;
            color: #555;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .date-display {
            font-size: 1rem;
            color: #888;
            margin-top: 5px;
            transition: all 0.3s ease;
        }
        /* å¤©æ°”æ¨¡å—æ ·å¼ */
        .weather-container {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(15px);
            animation: fadeInUp 0.8s ease-out 0.7s forwards;
            transition: all 0.3s ease;
        }
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 20px;
            }
            h1 {
                font-size: 2rem;
            }
        }
        .weather-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .location {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
        }
        .refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s ease;
        }
        .refresh-btn:hover {
            background: #764ba2;
        }
        .weather-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        .weather-icon {
            font-size: 3rem;
        }
        .temperature {
            font-size: 2.5rem;
            font-weight: bold;
            color: #333;
        }
        .weather-details {
            text-align: left;
        }
        .weather-desc {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 5px;
        }
        .humidity-wind {
            font-size: 0.9rem;
            color: #888;
        }
        .weather-loading {
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ™šå®‰</h1>
        <p>æ„¿ä½ æœ‰ä¸€ä¸ªå®é™ç¾å¥½çš„å¤œæ™š</p>
        
        <!-- å®æ—¶æ—¶é—´æ¨¡å— -->
        <div class="time-container">
            <div class="time-display" id="time-display">--:--:--</div>
            <div class="date-display" id="date-display">----å¹´--æœˆ--æ—¥</div>
        </div>
        
        <!-- å¤©æ°”æ¨¡å— -->
        <div class="weather-container">
            <div class="weather-header">
                <div class="location" id="location">åŒ—äº¬</div>
                <button class="refresh-btn" onclick="getWeatherData()">åˆ·æ–°å¤©æ°”</button>
            </div>
            <div class="weather-info">
                <div class="weather-icon" id="weather-icon">â˜ï¸</div>
                <div class="temperature" id="temperature">22Â°C</div>
                <div class="weather-details">
                    <div class="weather-desc" id="weather-desc">å¤šäº‘</div>
                    <div class="humidity-wind" id="humidity-wind">æ¹¿åº¦: 55% | é£é€Ÿ: 2.1 m/s</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é«˜å¾·åœ°å›¾API Key
        const amapApiKey = 'cebd2ed5a03641dd6bbe701596a48da3';
        
        // å¤©æ°”å›¾æ ‡æ˜ å°„
        const weatherIcons = {
            'æ™´': 'â˜€ï¸',
            'å¤šäº‘': 'â˜ï¸',
            'é˜´': 'â˜ï¸',
            'å°é›¨': 'ğŸŒ¦ï¸',
            'ä¸­é›¨': 'ğŸŒ§ï¸',
            'å¤§é›¨': 'â›ˆï¸',
            'æš´é›¨': 'â›ˆï¸',
            'é›·é˜µé›¨': 'â›ˆï¸',
            'å°é›ª': 'â„ï¸',
            'ä¸­é›ª': 'â„ï¸',
            'å¤§é›ª': 'â„ï¸',
            'é›¾': 'ğŸŒ«ï¸',
            'éœ¾': 'ğŸŒ«ï¸',
            'default': 'â˜€ï¸'
        };
        
        // å…¨å±€å˜é‡å­˜å‚¨å½“å‰å¤©æ°”å’Œä½ç½®æ•°æ®
        let currentWeatherData = null;
        
        // åŒºåŸŸåç§°æ˜ å°„åˆ°ä»£è¡¨åŸå¸‚
        const regionMap = {
            'åä¸­åœ°åŒº': 'æ­¦æ±‰',
            'ååŒ—åœ°åŒº': 'åŒ—äº¬',
            'åä¸œåœ°åŒº': 'ä¸Šæµ·',
            'åå—åœ°åŒº': 'å¹¿å·',
            'è¥¿åŒ—åœ°åŒº': 'è¥¿å®‰',
            'è¥¿å—åœ°åŒº': 'æˆéƒ½',
            'ä¸œåŒ—åœ°åŒº': 'æ²ˆé˜³'
        };
        
        // è·å–å¤©æ°”æ•°æ®
        function getWeatherData() {
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            updateLoadingState();
            
            // ç›´æ¥ä½¿ç”¨IPå®šä½è·å–ä½ç½®
            getLocationByIP();
        }
        
        // æ›´æ–°åŠ è½½çŠ¶æ€
        function updateLoadingState() {
            document.getElementById('temperature').textContent = 'åŠ è½½ä¸­...';
            document.getElementById('weather-desc').textContent = 'è·å–å¤©æ°”ä¿¡æ¯ä¸­...';
            document.getElementById('humidity-wind').textContent = '';
        }
        
        // ä½¿ç”¨IPåœ°å€è·å–ä½ç½®ä¿¡æ¯ï¼ˆä½¿ç”¨é«˜å¾·åœ°å›¾APIï¼‰
        function getLocationByIP() {
            console.log('å¼€å§‹IPå®šä½...');
            
            // é«˜å¾·åœ°å›¾IPå®šä½API
            const amapIpLocationUrl = `https://restapi.amap.com/v3/ip?key=${amapApiKey}`;
            
            // ä½¿ç”¨JSONPæ–¹å¼è°ƒç”¨APIï¼ˆé¿å…CORSé—®é¢˜ï¼‰
            const callbackName = 'amapIpCallback_' + Date.now();
            
            // è®¾ç½®å…¨å±€å›è°ƒå‡½æ•°
            window[callbackName] = function(data) {
                console.log('IPå®šä½ç»“æœ:', data);
                
                // å¤„ç†è¿”å›çš„æ•°æ®
                if (data.status === '1') {
                    let cityName = data.city || data.province;
                    console.log(`å®šä½åˆ°: ${cityName}`);
                    
                    // æ£€æŸ¥æ˜¯å¦æ˜¯åŒºåŸŸåç§°ï¼Œå¦‚æœæ˜¯åˆ™ä½¿ç”¨ä»£è¡¨åŸå¸‚
                    if (regionMap[cityName]) {
                        console.log(`åŒºåŸŸåç§°æ˜ å°„: ${cityName} -> ${regionMap[cityName]}`);
                        cityName = regionMap[cityName];
                    }
                    
                    // æ ¹æ®åŸå¸‚åè·å–å¤©æ°”ä¿¡æ¯
                    getWeatherByCity(cityName);
                } else {
                    console.error('IPå®šä½å¤±è´¥:', data.info);
                    // è¿™é‡Œä¸ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆï¼Œåªæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                    document.getElementById('temperature').textContent = 'å®šä½å¤±è´¥';
                    document.getElementById('weather-desc').textContent = `é”™è¯¯: ${data.info || 'æœªçŸ¥é”™è¯¯'}`;
                }
                
                // æ¸…ç†
                cleanupJsonpScript(callbackName);
            };
            
            // åˆ›å»ºå¹¶æ·»åŠ scriptæ ‡ç­¾
            createJsonpScript(`${amapIpLocationUrl}&output=jsonp&callback=${callbackName}`, callbackName);
        }
        
        // åˆ›å»ºJSONP scriptæ ‡ç­¾
        function createJsonpScript(url, callbackName) {
            const script = document.createElement('script');
            script.id = `jsonp-${callbackName}`;
            script.src = url;
            script.onerror = function() {
                console.error('JSONPè¯·æ±‚å¤±è´¥');
                document.getElementById('temperature').textContent = 'è¯·æ±‚å¤±è´¥';
                document.getElementById('weather-desc').textContent = 'æ— æ³•è¿æ¥åˆ°å®šä½æœåŠ¡';
                cleanupJsonpScript(callbackName);
            };
            document.head.appendChild(script);
        }
        
        // æ¸…ç†JSONPèµ„æº
        function cleanupJsonpScript(callbackName) {
            setTimeout(() => {
                const script = document.getElementById(`jsonp-${callbackName}`);
                if (script && script.parentNode) {
                    script.parentNode.removeChild(script);
                }
                delete window[callbackName];
            }, 0);
        }
        
        // æ ¹æ®åŸå¸‚åç§°è·å–å¤©æ°”ä¿¡æ¯
        function getWeatherByCity(cityName) {
            console.log(`è·å–${cityName}çš„å¤©æ°”ä¿¡æ¯...`);
            
            // é¦–å…ˆéœ€è¦é€šè¿‡åœ°ç†ç¼–ç è·å–åŸå¸‚ç»çº¬åº¦
            const geocodeUrl = `https://restapi.amap.com/v3/geocode/geo?address=${encodeURIComponent(cityName)}&key=${amapApiKey}`;
            
            const geocodeCallbackName = 'amapGeocodeCallback_' + Date.now();
            
            window[geocodeCallbackName] = function(data) {
                console.log('åœ°ç†ç¼–ç ç»“æœ:', data);
                
                if (data.status === '1' && data.geocodes && data.geocodes.length > 0) {
                    // æå–ç»çº¬åº¦
                    const location = data.geocodes[0].location;
                    const [lon, lat] = location.split(',').map(coord => parseFloat(coord));
                    console.log(`è·å–åˆ°${cityName}çš„ç»çº¬åº¦: çº¬åº¦=${lat}, ç»åº¦=${lon}`);
                    
                    // ä½¿ç”¨é«˜å¾·åœ°å›¾å¤©æ°”APIè·å–å¤©æ°”ä¿¡æ¯
                    getAmapWeather(lat, lon, cityName);
                } else {
                    console.error('åœ°ç†ç¼–ç å¤±è´¥');
                    document.getElementById('temperature').textContent = 'è·å–å¤±è´¥';
                    document.getElementById('weather-desc').textContent = 'æ— æ³•è·å–åŸå¸‚ä¿¡æ¯';
                }
                
                cleanupJsonpScript(geocodeCallbackName);
            };
            
            createJsonpScript(`${geocodeUrl}&output=jsonp&callback=${geocodeCallbackName}`, geocodeCallbackName);
        }
        
        // è·å–é«˜å¾·åœ°å›¾å¤©æ°”ä¿¡æ¯
        function getAmapWeather(lat, lon, cityName) {
            // é«˜å¾·åœ°å›¾å¤©æ°”APIéœ€è¦åŸå¸‚çš„adcodeï¼Œè¿™é‡Œä½¿ç”¨ç»çº¬åº¦é€†åœ°ç†ç¼–ç è·å–adcode
            const regeoUrl = `https://restapi.amap.com/v3/geocode/regeo?location=${lon},${lat}&key=${amapApiKey}`;
            
            const regeoCallbackName = 'amapRegeoCallback_' + Date.now();
            
            window[regeoCallbackName] = function(data) {
                console.log('é€†åœ°ç†ç¼–ç ç»“æœ:', data);
                
                if (data.status === '1' && data.regeocode && data.regeocode.addressComponent) {
                    const adcode = data.regeocode.addressComponent.adcode;
                    
                    if (adcode) {
                        // ä½¿ç”¨adcodeè·å–å¤©æ°”ä¿¡æ¯
                        fetchWeatherWithAdcode(adcode, cityName);
                    } else {
                        // å¦‚æœæ²¡æœ‰è·å–åˆ°adcodeï¼Œä½¿ç”¨æ¨¡æ‹Ÿå¤©æ°”æ•°æ®
                        displayMockWeather(cityName);
                    }
                }
                
                cleanupJsonpScript(regeoCallbackName);
            };
            
            createJsonpScript(`${regeoUrl}&output=jsonp&callback=${regeoCallbackName}`, regeoCallbackName);
        }
        
        // ä½¿ç”¨adcodeè·å–å¤©æ°”ä¿¡æ¯
        function fetchWeatherWithAdcode(adcode, cityName) {
            const weatherUrl = `https://restapi.amap.com/v3/weather/weatherInfo?city=${adcode}&key=${amapApiKey}`;
            
            const weatherCallbackName = 'amapWeatherCallback_' + Date.now();
            
            window[weatherCallbackName] = function(data) {
                console.log('å¤©æ°”æŸ¥è¯¢ç»“æœ:', data);
                
                if (data.status === '1' && data.lives && data.lives.length > 0) {
                    const weatherData = data.lives[0];
                    
                    // æ„å»ºå¤©æ°”æ•°æ®å¯¹è±¡
                    const weatherInfo = {
                        city: cityName,
                        temperature: weatherData.temperature,
                        description: weatherData.weather,
                        humidity: weatherData.humidity,
                        windSpeed: weatherData.windpower,
                        weatherType: weatherData.weather
                    };
                    
                    // æ›´æ–°å¤©æ°”æ˜¾ç¤º
                    updateWeatherDisplay(weatherInfo);
                } else {
                    console.error('å¤©æ°”æŸ¥è¯¢å¤±è´¥');
                    displayMockWeather(cityName);
                }
                
                cleanupJsonpScript(weatherCallbackName);
            };
            
            createJsonpScript(`${weatherUrl}&output=jsonp&callback=${weatherCallbackName}`, weatherCallbackName);
        }
        
        // æ˜¾ç¤ºæœªçŸ¥å¤©æ°”æ•°æ®ï¼ˆå½“APIè°ƒç”¨å¤±è´¥æ—¶ä½¿ç”¨ï¼‰
        function displayMockWeather(cityName) {
            console.log('æ•°æ®è·å–å¤±è´¥ï¼Œæ˜¾ç¤ºæœªçŸ¥æ•°æ®');
            
            const unknownData = {
                city: cityName || 'æœªçŸ¥ä½ç½®',
                temperature: '--',
                description: 'æœªçŸ¥',
                humidity: '--',
                windSpeed: '--',
                weatherType: 'default'
            };
            
            updateWeatherDisplay(unknownData);
        }
        
        // æ›´æ–°å¤©æ°”æ˜¾ç¤º
        function updateWeatherDisplay(weatherData) {
            // æ›´æ–°å…¨å±€å¤©æ°”æ•°æ®
            currentWeatherData = weatherData;
            
            const weatherContainer = document.querySelector('.weather-container');
            
            // æ·»åŠ æ›´æ–°åŠ¨ç”»æ•ˆæœ
            weatherContainer.style.transform = 'translateY(5px)';
            weatherContainer.style.opacity = '0.9';
            
            // çŸ­æš‚å»¶è¿Ÿåæ›´æ–°å†…å®¹
            setTimeout(() => {
                document.getElementById('location').textContent = weatherData.city;
                document.getElementById('temperature').textContent = weatherData.temperature + 'Â°C';
                document.getElementById('weather-icon').textContent = weatherIcons[weatherData.weatherType] || weatherIcons.default;
                document.getElementById('weather-desc').textContent = weatherData.description;
                document.getElementById('humidity-wind').textContent = 
                    `æ¹¿åº¦: ${weatherData.humidity}% | é£é€Ÿ: ${weatherData.windSpeed} çº§`;
                
                // æ¢å¤åŸå§‹çŠ¶æ€
                weatherContainer.style.transform = 'translateY(0)';
                weatherContainer.style.opacity = '1';
            }, 200);
            
            // æ›´æ–°è¯­å½•
            updateInspirationalQuote();
        }

        // è°ƒç”¨æ˜Ÿç«å¤§æ•°æ®APIç”Ÿæˆéšæœºè¯­å½•ï¼ˆæµå¼å“åº”ï¼‰
        function updateInspirationalQuote() {
            if (!currentWeatherData) {
                console.log('å¤©æ°”æ•°æ®æœªå°±ç»ªï¼Œæ— æ³•ç”Ÿæˆè¯­å½•');
                return;
            }
            
            // æ„å»ºå…³é”®è¯å‚æ•°
            const city = currentWeatherData.city || 'æœªçŸ¥ä½ç½®';
            const weather = currentWeatherData.description || 'æœªçŸ¥å¤©æ°”';
            const temperature = currentWeatherData.temperature || '--';
            const hour = new Date().getHours();
            
            // æ˜Ÿç«å¤§æ•°æ®APIè°ƒç”¨ï¼ˆä½¿ç”¨HTTP POSTæµå¼å“åº”ï¼‰
            const apiKey = '2f3d88b9c7a5e52f05d2f36241db2d08'; // ç”¨æˆ·æä¾›çš„APIå¯†é’¥
            const appId = '56cc1a3a';   // ç”¨æˆ·æä¾›çš„åº”ç”¨ID
            const apiSecret = 'ODVhMmMyYmVlZTFkYjYwNzlkNWUxZTYz'; // ç”¨æˆ·æä¾›çš„APIå¯†é’¥
            const prompt = `ç”Ÿæˆä¸€å¥ç®€çŸ­ä¼˜ç¾çš„é—®å€™è¯­æˆ–åŠ±å¿—è¯­å½•ï¼ŒåŒ…å«ä»¥ä¸‹å…ƒç´ ï¼šå½“å‰åœ¨${city}ï¼Œå¤©æ°”${weather}ï¼Œæ¸©åº¦${temperature}Â°Cï¼Œæ—¶é—´${hour}ç‚¹å·¦å³ã€‚è¯­å½•è¦ç®€æ´ã€æ¸©æš–ã€æœ‰æ­£èƒ½é‡ã€‚`;
            
            // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ç”ŸæˆåŠ±å¿—è¯­å½•
            async function callSparkAPI() {
                try {
                    // ç”±äºè·¨åŸŸé—®é¢˜ï¼Œç›´æ¥ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                    console.log('ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ç”ŸæˆåŠ±å¿—è¯­å½•');
                    fallbackToSimulatedData();
                } catch (error) {
                    console.error('ç”ŸæˆåŠ±å¿—è¯­å½•æ—¶å‡ºé”™:', error);
                    // ç¡®ä¿æ€»æ˜¯æœ‰æ•°æ®æ˜¾ç¤º
                    fallbackToSimulatedData();
                }
            }
            
            // å½“ä»£ç†æœåŠ¡ä¸å¯ç”¨æ—¶çš„å›é€€æ–¹æ¡ˆ
            function fallbackToSimulatedData() {
                const greetings = [
                    `${city}çš„${hour}ç‚¹ï¼Œ${weather}${temperature}Â°Cï¼Œæ„¿ä½ å¿ƒæƒ…å¦‚é˜³å…‰èˆ¬æ¸©æš–ï¼`,
                    `${weather}çš„${city}ï¼Œ${temperature}Â°Cï¼Œ${hour}ç‚¹çš„æ—¶å…‰æœ€é€‚åˆäº«å—ç”Ÿæ´»ï¼`,
                    `åœ¨${city}${weather}çš„${hour}ç‚¹ï¼Œ${temperature}Â°Cçš„æ¸©åº¦ï¼Œç¥ä½ æœ‰ä¸ªæ„‰å¿«çš„ä¸€å¤©ï¼`,
                    `${hour}ç‚¹çš„${city}ï¼Œ${weather}å®œäººï¼Œ${temperature}Â°Cæ­£èˆ’é€‚ï¼Œä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥çš„ï¼`,
                    `ä»Šå¤©${city}${weather}ï¼Œ${temperature}Â°Cï¼Œ${hour}ç‚¹çš„ä½ ï¼Œæœ€ç¾æœ€æ£’ï¼`
                ];
                
                const randomGreeting = greetings[Math.floor(Math.random() * greetings.length)];
                const pElement = document.querySelector('p');
                
                // æ·»åŠ å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœæ›´æ–°é—®å€™è¯­
                pElement.style.opacity = '0';
                pElement.style.transform = 'translateY(5px)';
                
                setTimeout(() => {
                    pElement.textContent = randomGreeting;
                    pElement.style.opacity = '1';
                    pElement.style.transform = 'translateY(0)';
                }, 300);
                
                console.log('ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ä½œä¸ºå›é€€æ–¹æ¡ˆ');
            }
            
            // è°ƒç”¨ä»£ç†API
            callSparkAPI();
            
            // å›é€€åˆ°é»˜è®¤é—®å€™è¯­çš„å‡½æ•°
            function fallbackToDefaultGreeting() {
                const greetingInfo = getGreetingByTime(hour);
                document.querySelector('p').textContent = greetingInfo.subtitle;
            }
        }
        
        // æ ¹æ®æ—¶é—´è·å–é—®å€™è¯­
        function getGreetingByTime(hour) {
            if (hour >= 0 && hour < 6) {
                return { greeting: 'å¤œæ·±äº†', subtitle: 'æ—©ç‚¹ä¼‘æ¯ï¼Œåšä¸ªå¥½æ¢¦' };
            } else if (hour >= 6 && hour < 12) {
                return { greeting: 'æ—©ä¸Šå¥½', subtitle: 'æ–°çš„ä¸€å¤©ï¼Œå……æ»¡æ´»åŠ›' };
            } else if (hour >= 12 && hour < 14) {
                return { greeting: 'ä¸­åˆå¥½', subtitle: 'åˆä¼‘æ—¶é—´ï¼Œæ”¾æ¾ä¸€ä¸‹' };
            } else if (hour >= 14 && hour < 18) {
                return { greeting: 'ä¸‹åˆå¥½', subtitle: 'ä¸‹åˆæ—¶å…‰ï¼Œç»§ç»­åŠ æ²¹' };
            } else if (hour >= 18 && hour < 22) {
                return { greeting: 'æ™šä¸Šå¥½', subtitle: 'æ™šä¸Šæ„‰å¿«ï¼Œäº«å—ä¼‘é—²æ—¶å…‰' };
            } else {
                return { greeting: 'å¤œæ·±äº†', subtitle: 'æ—©ç‚¹ä¼‘æ¯ï¼Œæ™šå®‰' };
            }
        }

        // æ›´æ–°æ—¶é—´æ˜¾ç¤º - ç»‘å®šåˆ°windowå¯¹è±¡ç¡®ä¿åœ¨ä»»ä½•ä½œç”¨åŸŸéƒ½èƒ½è®¿é—®
        window.updateTime = function() {
            const now = new Date();
            const hour = now.getHours();
            
            // è·å–é€‚åˆå½“å‰æ—¶é—´çš„é—®å€™è¯­
            const greetingInfo = getGreetingByTime(hour);
            const h1Element = document.querySelector('h1');
            
            // åªæœ‰å½“é—®å€™è¯­å˜åŒ–æ—¶æ‰æ·»åŠ è¿‡æ¸¡åŠ¨ç”»
            if (h1Element.textContent !== greetingInfo.greeting) {
                h1Element.style.opacity = '0';
                h1Element.style.transform = 'translateY(-5px)';
                
                // çŸ­æš‚å»¶è¿Ÿåæ›´æ–°å†…å®¹å¹¶æ¢å¤æ˜¾ç¤º
                setTimeout(() => {
                    h1Element.textContent = greetingInfo.greeting;
                    h1Element.style.opacity = '1';
                    h1Element.style.transform = 'translateY(0)';
                }, 200);
            }
            
            // æ ¼å¼åŒ–æ—¶é—´
            const hours = hour.toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            
            // æ ¼å¼åŒ–æ—¥æœŸ
            const year = now.getFullYear();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const day = now.getDate().toString().padStart(2, '0');
            const dateString = `${year}å¹´${month}æœˆ${day}æ—¥`;
            
            // æ›´æ–°DOM
            const timeDisplay = document.getElementById('time-display');
            const dateDisplay = document.getElementById('date-display');
            
            // ä¸ºæ—¶é—´æ›´æ–°æ·»åŠ å¹³æ»‘è¿‡æ¸¡
            timeDisplay.style.opacity = '0.7';
            setTimeout(() => {
                timeDisplay.textContent = timeString;
                timeDisplay.style.opacity = '1';
            }, 50);
            
            // åªæœ‰å½“æ—¥æœŸå˜åŒ–æ—¶æ‰æ›´æ–°æ—¥æœŸæ˜¾ç¤º
            if (dateDisplay.textContent !== dateString) {
                dateDisplay.style.opacity = '0';
                setTimeout(() => {
                    dateDisplay.textContent = dateString;
                    dateDisplay.style.opacity = '1';
                }, 200);
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            // ä¸ºäº†ç¡®ä¿é¡µé¢åŠ è½½æ—¶æœ‰åˆå§‹æ˜¾ç¤ºï¼Œå…ˆæ‰§è¡Œä¸€æ¬¡updateTime
            updateTime();
            // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯ç§’æ›´æ–°ä¸€æ¬¡æ—¶é—´
            setInterval(updateTime, 1000);
            
            // è·å–å¤©æ°”æ•°æ®
            getWeatherData();
        };
    </script>
</body>
</html>